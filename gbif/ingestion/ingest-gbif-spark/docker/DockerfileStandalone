# Simple image that copy the already previous builds shaded jar into a specific location.
# This is used for SparkApplications to have a simple way to access the artifacts during their execution
FROM spark:3.5.1-scala2.12-java17-python3-ubuntu
ARG JAR_FILE=${JAVA_JAR_FILE}
USER root
RUN mkdir /jobs
COPY --chown=1000:1000 "./target/${JAR_FILE}" "/jobs/ingest-gbif-spark.jar"
CMD ["MODE", "PATH_TO_CONFIG"]
ENTRYPOINT ["java", "--add-opens=java.base/java.lang.invoke=ALL-UNNAMED", "-jar", "/jobs/ingest-gbif-spark.jar"]